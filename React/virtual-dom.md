# 가상 돔 (Virtual DOM)

리액트나 뷰 등에서 주요 특징으로 언급되는 버추얼 돔, 이에 대해서 자세히 설명할 수 있게 끔 정리를 해보고자 한다.   

우선 버추얼 돔에 대해 이야기 하려면 [브라우저의 동작원리](https://github.com/jake920220/TIL/blob/master/Javascript/browser-sequence.md)에 대한 이해가 필요하다.   
이에 대해서는 전 날 정리를 해 두었기 때문에 링크로 대체한다.   

<br>

렌더 트리를 구성하는 과정에서 node별로 attatch라는 메소드가 실행되며 attatchment 과정을 거친 후 레이아웃이라는 과정으로 이어지게 된다.
레이아웃 과정에서는 브라우저가 렌더 트리의 각 노드에 좌표를 부여하고 어떻게 표시할지를 결정한다.   
개발자가 자바스크립트를 이용하여 DOM을 조작하게 되면 다시 attatch 메소드가 실행되며 레이아웃의 과정이 반복된다. 이때 레이아웃 과정이 다시 수행되는 것을 리플로우, 다시 페인팅되는 과정을 리페인트 라고 하는데
리플로우와 리페인트는 각 노드에 대한 연산을 수행하므로 이 과정이 여러번 수행될 수록 웹서비스 성능 이슈가 발생하게 된다.   

<br>

전통적인 정적 웹사이트에서는 큰 문제가 되지 않지만 SPA처럼 돔 변경이 컴포넌트 단위로 동시다발적으로 일어나는 서비스의 경우 큰 성능이슈를 유래할 수 있다.   
리액트나 뷰의 버추얼돔은 이를 해결하는 과정을 돔과 동일한 가상의 돔을 메모리상에 만들고, 여러 번 반복해서 일어나는 리플로우 리페인트 과정을 버추얼돔에서 수행시킨 뒤, 해당 버추얼돔을 돔에 반영하여
실제 리플로우와 리페인팅의 횟수를 획기적으로 줄이는 방법을 사용했다.

