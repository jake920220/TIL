# REST API



#### REST API 가 뭐야?

REST 는 Representational State Transfer의 약자로 HTTP의 설계 우수성에 비해 제대로 사용되어지지 않아 웹의 장점을 최대한 활용할 수 있게 고안된 아키텍쳐이다.
약어만 풀어 해석하면 표현 상태전달? 뜻이 모호하다.. 

REST는 크게 세가지의 구성으로 이루어져 있는데

URI(자원), METHOD(행위), Representations(메시지)이다.

api가 ~~/users/{id} GET 이라면  ~~/users/는 자원, GET은 HTTP METHOD, {id} 는 메시지가 되는 셈.



#### HTTP METHOD?

위의 GET과 같이 행위를 HTTP Method라 하는데 다음과 같은 형태로 존재한다.

GET // 조회

POST // 생성

PUT // 수정

DELETE // 삭제

POST요청을 제외하고는 모두 계속 요청해도 결과가 같다. 이를 **Idempotent**하다 고 표현한다.



#### REST 특징?

- 유니폼 인터페이스 (Uniform Interface)

  REST는 HTTP 표준만 따른다면 어떠한 기술이던 사용이 가능함을 의미.

  예를 들어 HTTP + JSON 이라면 어떠한 언어나 플랫폼에도 구애받지 않고 사용이 가능하다.

- 무상태성 (Stateless)

  State(상태)를 유지하지 않는다. 이는 클라이언트 컨택스트를 서버에서 저장하지 않는다는 뜻.

  각 API서버는 들어오는 요청만 처리하고 세션같은 컨텍스트 정보를 신경 쓸 필요가 없어 구현이 단순해진다.

- 캐싱가능 (Cacheable)

  REST는 HTTP 웹 표준을 그대로 사용하기 때문에 기존 웹에서 사용하는 인프라를 그대로 사용할 수 있다.

  그중 하나가 캐싱 기능인데 HTTP에서 사용하는 last-modified 태그나 e-tag를 사용하면 캐싱구현이 가능하다.

- 자체표현구조 (Self-descriptiveness)

  REST는 위에서 /users/를 예시로 든 것처럼 URI, 메서드, 메시지만 보고도 어떠한 요청인지 짐작할 수 있다.

- 클라이언트-서버 구조 (Client-Server)

  REST서버는 API를 제공하고, 이를 이용한 비즈니스 로직을 처리하고,

  클라이언트는 사용자 인증이나 컨텍스트등을 직접 관리하는 구조로 나눌 수 있다. 이러면 역할이 명확히 구분되고 의존성이 줄어들게 된다.


- 계층형 구조 (Layered System)

  근래에 MSA가 주목받으며 다시 주목받기 시작한 구조인데 클라이언트는 REST 서버 API를 호출하지만 서버는 다중계층으로 구성할 수 있다.

  클라이언트가 요청한 비즈니스 로직과 그 앞단의 사용자 인증 미들웨어, 암호화 등등을 별도로 호출할 수 있다.



#### REST 안티패턴

**REST 디자인 시 하지 말아야 할 안티 패턴 내용이다.**

- ##### GET/POST를 이용한 터널링

  메소드의 실제동작은 업데이트나 딜리트임에도 GET이나 POST를 이용하는 것, 대단히 좋지 않은 디자인

- ##### Self-descriptiveness 속성을 사용하지 않음

  앞선 언급처럼 URI, 메서드, 메시지만 보고도 어떠한 api인지 알 수 있어야 하는데 그렇지 못한 것

- ##### HTTP Response State Code를 제대로 사용하지 않음

  성공은 200만 보내고, 실패는 무조건 500만 보내는 등의 잘못된 HTTP 스테이트 코드 처리

- ##### 그 외

  - URI

    마지막 문자로 슬래시(/)를 포함하지 않아야함.

    하이픈은 사용가능, 언더스코어는 사용불가

    파일확장자는 URI에 포함하지 않음
